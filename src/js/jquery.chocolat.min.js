! function(a) { images = []; var b = 0;
    a.fn.Chocolat = function(c) {
        function f(a) { return c.currentImage = a.data.i, c.setIndex = a.data.id, c.setTitle = a.data.nom, c.lastImage = images[c.setIndex].length - 1, h(), !1 }

        function g() { q(), c.container.append('<div id="Choco_overlay"></div><div id="Choco_content"><div id="Choco_close"></div><div id="Choco_loading"></div><div id="Choco_container_photo"><img id="Choco_bigImage" src="" /></div><div id="Choco_container_description"><span id="Choco_container_title"></span><span id="Choco_container_via"></span></div><div id="Choco_left_arrow" class="Choco_arrows"></div><div id="Choco_right_arrow" class="Choco_arrows"></div></div>'), a("#Choco_left_arrow").css("background-image", "url(" + c.leftImg + ")"), a("#Choco_right_arrow").css("background-image", "url(" + c.rightImg + ")"), a("#Choco_close").css("background-image", "url(" + c.closeImg + ")"), a("#Choco_loading").css("background-image", "url(" + c.loadingImg + ")"), "body" !== c.container.get(0).nodeName.toLowerCase() && (c.container.css({ position: "relative", overflow: "hidden", "line-height": "normal" }), a("#Choco_content").css("position", "relative"), a("#Choco_overlay").css("position", "absolute")), a(document).unbind("keydown").bind("keydown", function(a) { switch (a.keyCode) {
                    case 37:
                        j(-1); break;
                    case 39:
                        j(1); break;
                    case 27:
                        r() } }), c.vache && a("#Choco_overlay").click(function() { return r(), !1 }), a("#Choco_left_arrow").unbind().bind("click", function() { return j(-1), !1 }), a("#Choco_right_arrow").unbind().bind("click", function() { return j(1), !1 }), a("#Choco_close").unbind().bind("click", function() { return r(), !1 }), a(window).resize(function() { i(c.currentImage, !0) }) }

        function h() { g(), i(c.currentImage, !1), a("#Choco_overlay").css({ "background-color": c.overlayColor, opacity: c.overlayOpacity }).fadeIn(c.fadeInOverlayduration), a("#Choco_content").fadeIn(c.fadeInImageduration, function() {}) }

        function i(b, d) { c.currentImage = b, a("#Choco_loading").fadeIn(c.fadeInImageduration); var e = new Image;
            e.onload = function() { a("#Choco_bigImage").attr("src", images[c.setIndex][c.currentImage].adress); var b = p(e.height, e.width);
                k(b.hauteur, b.largeur, d), a("#Choco_loading").stop().fadeOut(c.fadeOutImageduration) }, e.src = images[c.setIndex][c.currentImage].adress, m(), n() }

        function j(b) { if (!c.linkImages || 0 == c.currentImage && -1 == b || c.currentImage == c.lastImage && 1 == b) return !1;
            a("#Choco_container_description").css("visibility", "hidden"), a("#Choco_bigImage").fadeTo(c.fadeOutImageduration, 0, function() { i(c.currentImage + parseInt(b), !1) }) }

        function k(b, d, e) { e && (a("#Choco_container_photo, #Choco_content, #Choco_bigImage").stop(!0, !1).css({ overflow: "visible" }), a("#Choco_bigImage").animate({ height: b + "px", width: d + "px" }, c.fadeInImageduration)), a("#Choco_container_photo").animate({ height: b, width: d }, c.fadeInImageduration), a("#Choco_content").animate({ height: b, width: d, marginLeft: -d / 2, marginTop: -b / 2 }, c.fadeInImageduration, "swing", function() { a("#Choco_bigImage").fadeTo(c.fadeInImageduration, 1).height(b).width(d), e || (l(), a("#Choco_container_description").css("visibility", "visible"), a("#Choco_close").fadeIn(c.fadeInImageduration)) }).css("overflow", "visible") }

        function l() { if (c.linkImages)
                for (var b = ["Choco_right_arrow", "Choco_left_arrow"], d = 0; d < b.length; d++) hide = !1, "Choco_right_arrow" == b[d] && c.currentImage == c.lastImage ? (hide = !0, a("#" + b[d]).fadeOut(300)) : "Choco_left_arrow" == b[d] && 0 == c.currentImage && (hide = !0, a("#" + b[d]).fadeOut(300)), hide || a("#" + b[d]).fadeIn(c.fadeOutImageduration) }

        function m() { c.currentImage !== c.lastImage && (d = new Image, z = c.currentImage + 1, d.src = images[c.setIndex][z].adress) }

        function n() { var b = c.currentImage + 1,
                d = c.lastImage + 1;
            a("#Choco_container_title").html(images[c.setIndex][c.currentImage].caption), a("#Choco_container_via").html(c.setTitle + c.separator1 + b + c.separator2 + d) }

        function o(a, b) { return void 0 === a ? b : a }

        function p(b, d) { var e = d + 28 * d / 100,
                f = a("#Choco_container_description").height() + a("#Choco_close").height(),
                g = b + f,
                h = d / b,
                i = b / d; for ("body" == c.container.get(0).nodeName.toLowerCase() ? (windowHeight = a(window).height(), windowWidth = a(window).width()) : (windowHeight = c.container.height(), windowWidth = c.container.width()), notFitting = !0; notFitting;) { var e = d + 28 * d / 100,
                    g = b + f;
                e > windowWidth ? (d = 100 * windowWidth / 128, b = i * d) : g > windowHeight ? (b = windowHeight - f, d = h * b) : notFitting = !1 } return { largeur: d, hauteur: b } }

        function q() { a("#Choco_overlay").remove(), a("#Choco_content").remove() }

        function r() { a("#Choco_overlay").fadeOut(900, function() { a("#Choco_overlay").remove() }), a("#Choco_content").fadeOut(500, function() { a("#Choco_content").remove() }), c.currentImage = 0 }
        c = a.extend({ container: a("body"), displayAsALink: !1, linkImages: !0, linksContainer: "Choco_links_container", overlayOpacity: .9, overlayColor: "#fff", fadeInOverlayduration: 500, fadeInImageduration: 500, fadeOutImageduration: 500, vache: !0, separator1: " | ", separator2: "/", leftImg: "images/left.gif", rightImg: "images/right.gif", closeImg: "images/close.gif", loadingImg: "images/loading.gif", currentImage: 0, setIndex: 0, setTitle: "", lastImage: 0 }, c), b++, c.setIndex = b, images[c.setIndex] = [], this.each(function(b) { 0 == b && c.linkImages && "" == c.setTitle && (c.setTitle = o(a(this).attr("rel"), " ")), a(this).each(function() { images[c.setIndex].displayAsALink = c.displayAsALink, images[c.setIndex][b] = [], images[c.setIndex][b].adress = o(a(this).attr("href"), " "), images[c.setIndex][b].caption = o(a(this).attr("title"), " "), c.displayAsALink || a(this).unbind("click").bind("click", { id: c.setIndex, nom: c.setTitle, i: b }, f) }) }); for (var d = 0; d < images[c.setIndex].length; d++)
            if (images[c.setIndex].displayAsALink) return 0 == a("#" + c.linksContainer).size() && this.filter(":first").before('<ul id="' + c.linksContainer + '"></ul>'), a("#" + c.linksContainer).append('<li><a href="#" id="Choco_numsetIndex_' + c.setIndex + '" class="Choco_link">' + c.setTitle + "</a></li>"), e = this.parent(), a(this).remove(), "" == a.trim(e.html()) && e.remove(), a("#Choco_numsetIndex_" + c.setIndex).unbind("click").bind("click", { id: c.setIndex, nom: c.setTitle, i: c.currentImage }, f) } }(jQuery);